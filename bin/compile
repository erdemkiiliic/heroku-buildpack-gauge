#!/usr/bin/env bash

# This script is executed during the build process on Heroku.
# It is responsible for installing Gauge and its dependencies.

# Print all executed commands
set -e

# Define the versions
GAUGE_VERSION="1.4.3"

echo "-----> Installing Gauge $GAUGE_VERSION"

# Install dependencies
apt-get update
apt-get install -y unzip

# Download Gauge binary
curl -SsL -o gauge.zip "https://github.com/getgauge/gauge/releases/download/v$GAUGE_VERSION/gauge-$GAUGE_VERSION-linux.x86_64.zip"

# Unzip Gauge
unzip -o gauge.zip -d /app/vendor

# Set the Gauge binary path
export PATH="/app/vendor/gauge:$PATH"

# Print the Gauge version to verify installation
gauge --version

echo "-----> Gauge $GAUGE_VERSION installation complete."
